"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4638],{7129:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"js/async-js/promise","title":"Promise","description":"Promise is an object that represents the eventual completion (or failure) of an asynchronous operation and its resulting value.","source":"@site/docs/js/async-js/promise.mdx","sourceDirName":"js/async-js","slug":"/js/async-js/promise","permalink":"/docs/js/async-js/promise","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/js/async-js/promise.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"javascriptSidebar","previous":{"title":"Fetch","permalink":"/docs/js/async-js/fetch"},"next":{"title":"Async/Await","permalink":"/docs/js/async-js/async-await"}}');var o=r(4848),i=r(8453);const t={sidebar_position:1},l="Promise",a={},c=[{value:"Promise creation",id:"promise-creation",level:3},{value:"Promise execution",id:"promise-execution",level:3},{value:"Promise chaining",id:"promise-chaining",level:3},{value:"How promise works behind the scenes (Microtasks queue)",id:"how-promise-works-behind-the-scenes-microtasks-queue",level:3},{value:"Promise API",id:"promise-api",level:3},{value:"Promise.all",id:"promiseall",level:4},{value:"Promise.allSettled",id:"promiseallsettled",level:4},{value:"Promise.race",id:"promiserace",level:4},{value:"Promise.any",id:"promiseany",level:4},{value:"Doubts",id:"doubts",level:3},{value:"References",id:"references",level:3},{value:"Notes",id:"notes",level:3}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"promise",children:"Promise"})}),"\n",(0,o.jsx)(s.p,{children:"Promise is an object that represents the eventual completion (or failure) of an asynchronous operation and its resulting value."}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"promise-creation",children:"Promise creation"}),"\n",(0,o.jsx)(s.p,{children:"To create a promise, we need to pass a callback function to the Promise constructor. This callback function takes two arguments: resolve and reject."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"const promiseResolve = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('Hello, world!');\n  }, 1000);\n});\n\npromiseResolve.then((value) => {\n  console.log(value); // Prints 'Hello, world!' after 1 second\n});\n\nconst promiseReject = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    reject('Error');\n  }, 1000);\n});\n\npromiseReject.catch((error) => {\n  console.log(error); // Prints 'Error' after 1 second\n});\n"})}),"\n",(0,o.jsxs)(s.admonition,{type:"info",children:[(0,o.jsx)(s.p,{children:"reject doesn\u2019t have to be caught only in .catch() \u2014 you can also handle it in the second argument of .then()"}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:'Promise.reject("Error happened")\n  .then(\n    value => console.log("Resolved:", value),     // success handler\n    reason => console.log("Rejected:", reason)    // error handler\n  );\n'})}),(0,o.jsx)(s.p,{children:".catch() is just syntactic sugar for .then(null, onRejected):"}),(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:'Promise.reject("Oops").catch(console.log);\n\n// is equivalent to:\nPromise.reject("Oops").then(null, console.log);\n'})})]}),"\n",(0,o.jsx)(s.p,{children:"If you don\u2019t handle the rejection in either .then() or .catch(), JavaScript will throw an unhandled promise rejection warning"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"promise-execution",children:"Promise execution"}),"\n",(0,o.jsx)(s.p,{children:"Promise execution starts as soon as it is created and does not wait for the .then() attachment or await keyword.\nEven if the .then() is attached after the promise is resolved, it will provide the resolved value (immediately in this case)."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"const promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('Hello, world!');\n  }, 1000);\n});\n\nsetTimeout(() => {\n  promise.then((value) => {\n    console.log(value); // Prints 'Hello, world!' after 2 seconds\n  });\n}, 2000);\n"})}),"\n",(0,o.jsx)(s.p,{children:"If we want lazy execution, we need to wrap the promise in a function and call it."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:'function getDataLazy() {\n  return new Promise(resolve => {\n    setTimeout(() => resolve("Hello"), 3000);\n  });\n}\n'})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"promise-chaining",children:"Promise chaining"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"how-promise-works-behind-the-scenes-microtasks-queue",children:"How promise works behind the scenes (Microtasks queue)"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"promise-api",children:"Promise API"}),"\n",(0,o.jsx)(s.h4,{id:"promiseall",children:"Promise.all"}),"\n",(0,o.jsx)(s.p,{children:"This waits for all promises to resolve and returns an array of their results.\nIf any of the promises reject, it will reject with the first rejection reason. Any remaining promises are ignored."}),"\n",(0,o.jsx)(s.h4,{id:"promiseallsettled",children:"Promise.allSettled"}),"\n",(0,o.jsx)(s.p,{children:"This waits for all promises to settle (resolve or reject) and returns an array of their results."}),"\n",(0,o.jsx)(s.admonition,{type:"warning",children:(0,o.jsxs)(s.p,{children:["Note that unlike ",(0,o.jsx)(s.code,{children:"Promise.all"}),", ",(0,o.jsx)(s.code,{children:"Promise.allSettled"})," doesn't directly return the values of the promises, but rather an object with the status of the promise and the value or reason."]})}),"\n",(0,o.jsx)(s.h4,{id:"promiserace",children:"Promise.race"}),"\n",(0,o.jsx)(s.p,{children:"This waits for the first promise to settle (resolve or reject) and returns its result."}),"\n",(0,o.jsx)(s.h4,{id:"promiseany",children:"Promise.any"}),"\n",(0,o.jsx)(s.p,{children:"This waits for the first promise to resolve and returns its result. If all promises reject, it will reject with an AggregateError."}),"\n",(0,o.jsx)(s.admonition,{type:"info",children:(0,o.jsx)(s.p,{children:"Promise.any will wait for the first successful promise even if some promises reject before it."})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Code examples"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-js",children:"const promise1 = new Promise((resolve, reject) => {\n  setTimeout(reject, 100, 'promise1 error'); // Rejects after 100ms\n});\nconst promise2 = new Promise((resolve, reject) => {\n  setTimeout(resolve, 200, 'promise2 success'); // Resolves after 200ms\n});\nconst promise3 = new Promise((resolve, reject) => {\n  setTimeout(resolve, 300, 'promise3 success'); // Resolves after 300ms\n});\nconst promise4 = new Promise((resolve, reject) => {\n  setTimeout(reject, 200, 'promise4 error'); // Rejects after 200ms\n});\n\n/*\n * Promise.all\n*/\nPromise.all([promise2, promise3]).then((values) => {\n  console.log(values); // After 200ms, prints ['promise2 success', 'promise3 success']\n})\n\nPromise.all([promise1, promise2, promise3, promise4]).then((values) => {\n  console.log(values); // Does not run\n}).catch((error) => {\n  console.log(error); // After 100ms, prints 'promise1 error'\n});\n\n/*\n * Promise.allSettled\n*/\nPromise.allSettled([promise1, promise2, promise3, promise4]).then((values) => {\n  console.log(values); // After 300ms, prints [{status: 'rejected', reason: 'promise1 error'}, {status: 'fulfilled', value: 'promise2 success'}, {status: 'fulfilled', value: 'promise3 success'}, {status: 'rejected', reason: 'promise4 error'}]\n});\n\n/*\n * Promise.race\n*/\nPromise.race([promise1, promise2, promise3, promise4]).then((value) => {\n  console.log(value); // After 100ms, prints 'promise1 error'\n});\n\n/*\n * Promise.any\n*/\nPromise.any([promise1, promise2, promise3, promise4]).then((value) => {\n  console.log(value); // After 200ms, prints 'promise2 success'\n});\n\nPromise.any([promise1, promise4]).then((value) => {\n  console.log(value); // Does not run\n}).catch((error) => {\n  console.log(error); // After 200ms, prints AggregateError: All promises were rejected\n  console.log(error.errors); // After 200ms, prints ['promise1 error', 'promise4 error']\n});\n"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"One-Line Memory Hooks"}),":"]}),"\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"API"}),(0,o.jsx)(s.th,{children:"Think\u2026"}),(0,o.jsx)(s.th,{children:"Mnemonic"})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Promise.all"}),(0,o.jsx)(s.td,{children:'"All must pass"'}),(0,o.jsx)(s.td,{children:"\u2620\ufe0f One fails = all fail"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Promise.any"}),(0,o.jsx)(s.td,{children:'"Any one good enough"'}),(0,o.jsx)(s.td,{children:"\ud83c\udfaf First success wins"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Promise.race"}),(0,o.jsx)(s.td,{children:'"Whoever finishes first wins"'}),(0,o.jsx)(s.td,{children:"\ud83c\udfc1 First to resolve/reject"})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:"Promise.allSettled"}),(0,o.jsx)(s.td,{children:'"Let\u2019s just see what happened to everyone"'}),(0,o.jsx)(s.td,{children:"\ud83d\udccb Results of all, no matter what"})]})]})]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"doubts",children:"Doubts"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)("span",{style:{color:"red"},children:"settled vs fulfilled meaning in promises"}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)("span",{style:{color:"red"},children:"What are real world use cases for different Promise APIs in UI"}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)("span",{style:{color:"red"},children:"Is .then() & .catch() same as try...catch block?"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"references",children:"References"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",children:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://javascript.info/promise-basics",children:"https://javascript.info/promise-basics"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://youtu.be/ap-6PPAuK1Y?list=PLlasXeu85E9eWOpw9jxHOQyGMRiBZ60aX",children:"https://youtu.be/ap-6PPAuK1Y?list=PLlasXeu85E9eWOpw9jxHOQyGMRiBZ60aX"})}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(s.h3,{id:"notes",children:"Notes"})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>l});var n=r(6540);const o={},i=n.createContext(o);function t(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);