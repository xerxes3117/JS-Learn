"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6520],{1851:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"js/how-js-works/scope","title":"Scope and Scope Chain","description":"Scope is the area of the program where the variable can be accessed. The scope of a variable is defined by its location within the code.","source":"@site/docs/js/how-js-works/scope.mdx","sourceDirName":"js/how-js-works","slug":"/js/how-js-works/scope","permalink":"/docs/js/how-js-works/scope","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/js/how-js-works/scope.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"javascriptSidebar","previous":{"title":"Javascript Engine","permalink":"/docs/js/how-js-works/javascript-engine"},"next":{"title":"Closure","permalink":"/docs/js/how-js-works/closure"}}');var i=s(4848),t=s(8453);s.p;const r=s.p+"assets/images/scope_notes1-04afece4f4c11caff757961eb8640afc.jpg",l={sidebar_position:1},c="Scope and Scope Chain",a={},d=[{value:"Lexical Environment",id:"lexical-environment",level:3},{value:"Scope Chain",id:"scope-chain",level:3},{value:"Types of Scope",id:"types-of-scope",level:3},{value:"Global lexical environment vs Global scope",id:"global-lexical-environment-vs-global-scope",level:3},{value:"Doubts",id:"doubts",level:3},{value:"References",id:"references",level:3},{value:"Notes",id:"notes",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"scope-and-scope-chain",children:"Scope and Scope Chain"})}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.p,{children:"Scope is the area of the program where the variable can be accessed. The scope of a variable is defined by its location within the code."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"Scope is established at compile time but used at runtime.\nWhich means scope of a variable is not determined by where the function is called, but by where the function is defined (i.e. where it is present lexically in the code)."})}),"\n",(0,i.jsxs)("div",{style:{color:"red"},children:["What exactly is meant by ",(0,i.jsx)(n.strong,{children:"creating a scope"}),"?"]}),"\n",(0,i.jsx)("div",{style:{color:"red"},children:"How closure scope creation is different from other types of scopes"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"lexical-environment",children:"Lexical Environment"}),"\n",(0,i.jsx)("span",{style:{color:"red"},children:"(Improve below definition. explain when lexical environment is created here itself rather than in warning)"}),"\n",(0,i.jsx)(n.p,{children:"Lexical environment is the local memory of the function along with the reference to the lexical environment of its lexically parent function. Scope is internally stored in memory as part of the Lexical Environment."}),"\n",(0,i.jsx)(n.p,{children:"It consists of two components:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment Record"}),": It stores all the local variables and function declarations within the function."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reference to the outer environment"}),": It is a reference to the outer lexical environment."]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Concept"}),(0,i.jsx)(n.th,{children:"What It Is?"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Scope"}),(0,i.jsx)(n.td,{children:"The set of variables/functions accessible in a given part of the code (based on where the code is written)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Lexical Environment"}),(0,i.jsxs)(n.td,{children:["The ",(0,i.jsx)(n.strong,{children:"internal data structure"})," that JavaScript uses to ",(0,i.jsx)(n.strong,{children:"implement scope"})," at runtime."]})]})]})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsxs)(n.p,{children:["A lexical environment is created when a function is ",(0,i.jsx)(n.strong,{children:"defined"}),", not when it's ",(0,i.jsx)(n.strong,{children:"called"})," and it happens in compilation phase. During this phase only, variables are allocated memory (in environment record) and hoisting is done."]}),(0,i.jsx)(n.p,{children:"When the function is called, its execution context is created and the previously created lexical environment is attached to this execution context."})]}),"\n",(0,i.jsx)("div",{style:{color:"red"},children:"Add images from browser dev tools showing all these lexical environments for nested functions (see end of namaste js video in references below)"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"scope-chain",children:"Scope Chain"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function outer() {\n  let x = 10;\n  function inner() {\n    console.log(x);\n  }\n  inner();\n}\n\nouter(); // 10\n"})}),"\n",(0,i.jsx)("div",{style:{color:"red"},children:"Draw and Import ipad images for scope chain"}),"\n","\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"types-of-scope",children:"Types of Scope"}),"\n",(0,i.jsx)("span",{style:{color:"red"},children:"Some of below maybe be same or invalid. Need to verify and correct them."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Global Scope"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Module Scope"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Block Scope"})," (",(0,i.jsx)(n.a,{href:"https://youtu.be/lW_erSjyMeM?list=PLlasXeu85E9cQ32gLCvAvr9vNaUccPVNP",children:"https://youtu.be/lW_erSjyMeM?list=PLlasXeu85E9cQ32gLCvAvr9vNaUccPVNP"}),")"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Function Scope"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Closure Scope"})}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"Script scope"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["What exactly it is and how it separates var and let/const variables: ",(0,i.jsx)(n.a,{href:"https://stackoverflow.com/a/70786086/8425685",children:"https://stackoverflow.com/a/70786086/8425685"})]}),"\n"]})]}),"\n",(0,i.jsx)("div",{style:{color:"red"},children:"When each of above scope is created, destroyed & what it stores"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Local Scope"})," (common name for block and function scope)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lexical Scope"})," (not an actual scope but a lookup rule implemented using scope chain i.e. reference to parent scope in lexical environment)"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"global-lexical-environment-vs-global-scope",children:"Global lexical environment vs Global scope"}),"\n",(0,i.jsxs)(n.p,{children:["Both global lexical environment and global scope are created when the script is loaded in the browser. ",(0,i.jsx)(n.strong,{children:"They both exist at the same time and are used to store global variables and functions in different ways."})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Global Scope"})}),"\n",(0,i.jsxs)(n.p,{children:["In browsers, ",(0,i.jsx)(n.strong,{children:"Global scope"})," is usually represented by the ",(0,i.jsx)(n.strong,{children:"window"})," object which is used to store ",(0,i.jsx)(n.strong,{children:"variables/functions which are accessible globally anywhere"}),". Depending upon the type of script tag, the global scope can store variables/functions in different ways."]}),"\n",(0,i.jsxs)(n.p,{children:["In a regular script, all ",(0,i.jsx)(n.strong,{children:"var"})," variables and functions are attached to the window object"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'var a = 10;\nlet b = 20;\nconst c = 30;\nfunction foo() {\n\tconsole.log("foo");\n}\nconsole.log(window.a); // 10\nconsole.log(window.foo); // function foo() { console.log("foo"); }\nconsole.log(window.b); // undefined\nconsole.log(window.c); // undefined\n'})}),"\n",(0,i.jsxs)(n.p,{children:["However, module scripts ",(0,i.jsx)(n.strong,{children:'script type="module"'})," run in a separate module scope and do not attach variables to the window object. This is because module scripts are designed to be more encapsulated and avoid polluting the global scope."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// script type="module"\nvar a = 10;\nlet b = 20;\nconst c = 30;\nfunction foo() {\n\tconsole.log("foo");\n}\n\nconsole.log(window.a); // undefined\nconsole.log(window.b); // undefined\nconsole.log(window.c); // undefined\nconsole.log(window.foo); // undefined\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In both cases, ",(0,i.jsx)(n.strong,{children:"let"})," and ",(0,i.jsx)(n.strong,{children:"const"})," variables are not attached to the ",(0,i.jsx)(n.strong,{children:"window"})," object. This is because let and const variables are block-scoped and do not have a global scope."]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Global Lexical Environment"})}),"\n",(0,i.jsxs)(n.p,{children:["Global Lexical Environment (GLE) is an internal JavaScript structure that stores global variables but separates ",(0,i.jsx)(n.strong,{children:"var"})," vs. ",(0,i.jsx)(n.strong,{children:"let"})," and ",(0,i.jsx)(n.strong,{children:"const"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["It stores var variables in the ",(0,i.jsx)(n.strong,{children:"declarative environment record"})," and let/const variables in the ",(0,i.jsx)(n.strong,{children:"object environment record"})," both of which are part of enviroment record defined above"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'var a = 10; //stored in declarative environment record\nlet b = 20; //stored in object environment record\nconst c = 30; //stored in object environment record\nfunction foo() { \n\tconsole.log("foo");\n}\nconsole.log(window.a); // 10\nconsole.log(window.b); // undefined\nconsole.log(window.c); // undefined\nconsole.log(window.foo); // function foo() { console.log("foo"); }\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GLE"})," is the primary Storage for all top level variables and functions, and is used when any global variable is accessed. When the JavaScript engine processes ",(0,i.jsx)(n.strong,{children:"var"})," declarations and ",(0,i.jsx)(n.strong,{children:"function"})," declarations at the top level, it does two things:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It creates a binding in the GLE."}),"\n",(0,i.jsx)(n.li,{children:"It also creates a property with the same name on the global object (window)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"let and const bypass the window Object"}),": Variables declared with ",(0,i.jsx)(n.strong,{children:"let"})," and ",(0,i.jsx)(n.strong,{children:"const"})," at the top level are stored in the ",(0,i.jsx)(n.strong,{children:"GLE"})," but are not automatically created as properties on the window object. They are still part of the global scope because the GLE is the first (and outermost) lexical environment in the scope chain when code is executing globally. You access them directly by their name."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Scope Resolution and the GLE"}),": When the JavaScript engine tries to resolve a variable in the global scope, it starts by looking in the current lexical environment, which is the GLE. If it finds the variable there (regardless of whether it was declared with var, let, or const), it uses that binding. For var globals, finding it in the GLE also implies its existence as a window property."]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Global Scope"}),(0,i.jsx)(n.th,{children:"Global Lexical Environment (GLE)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"What is it?"}),(0,i.jsx)(n.td,{children:"Everything accessible globally"}),(0,i.jsx)(n.td,{children:"Internal structure managing global variables"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Stores var?"}),(0,i.jsx)(n.td,{children:"\u2705 Yes (in window)"}),(0,i.jsx)(n.td,{children:"\u2705 Yes (in Object Environment Record)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Stores let and const?"}),(0,i.jsx)(n.td,{children:"\u2705 Yes"}),(0,i.jsx)(n.td,{children:"\u2705 Yes (in Declarative Environment Record)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Stored in window object?"}),(0,i.jsx)(n.td,{children:"\u2705 Yes (var)"}),(0,i.jsx)(n.td,{children:"\u274c No (let & const are not in window)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Has scope chain reference?"}),(0,i.jsx)(n.td,{children:"\u274c No"}),(0,i.jsx)(n.td,{children:"\u2705 Yes (contains Outer Lexical Environment reference)"})]})]})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Section Doubts"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("div",{style:{color:"red"},children:"Add declarative environment record and object environment record definitions in above section about Lexical Environment"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("div",{style:{color:"red"},children:"What is usage of both global scope and global lexical environment?"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"doubts",children:"Doubts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("span",{style:{color:"red"},children:"Lexical environment vs Variable environment. Is variable environment part of scope?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("span",{style:{color:"red"},children:"Where is lexical environment stored?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("span",{style:{color:"red"},children:"How variables are resolved using scope and lexical environment? explain with example"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("span",{style:{color:"red"},children:"What kind of data structures are used to store environment record and reference to the outer environment?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("span",{style:{color:"red"},children:"Scope rules in arrow functions vs normal functions"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("a",{href:"https://www.youtube.com/watch?v=2pL28CcEijU",target:"_blank",children:"Namaste JS - Scope, Scope chain & Lexical Environment"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Glossary/Scope",target:"_blank",children:"MDN - Scope"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("a",{href:"https://javascript.info/closure#lexical-environment",target:"_blank",children:"Javascript.info - Lexical Environment"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)("a",{href:"https://medium.com/@mohdtalib.dev/lexical-environment-in-javascript-a2112b78a3cb",target:"_blank",children:"Medium Article"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,i.jsx)("img",{src:r,alt:"Scope",width:"700"})]})}function x(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var o=s(6540);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);